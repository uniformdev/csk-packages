"use strict";(self.webpackChunkcsk_v_next_storybook=self.webpackChunkcsk_v_next_storybook||[]).push([[3641],{"../../packages/csk-components/dist/image-gallery-DBTZBKG5.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ImageGallery:()=>M});var chunk_EIQPM3DQ=__webpack_require__("../../packages/csk-components/dist/chunk-EIQPM3DQ.mjs"),chunk_EI3IJHIE=__webpack_require__("../../packages/csk-components/dist/chunk-EI3IJHIE.mjs"),chunk_JNIJ5N3Y=__webpack_require__("../../packages/csk-components/dist/chunk-JNIJ5N3Y.mjs"),chunk_S7CSCIW4=__webpack_require__("../../packages/csk-components/dist/chunk-S7CSCIW4.mjs"),component=__webpack_require__("../../node_modules/@uniformdev/canvas-next-rsc/dist/component.mjs"),react=__webpack_require__("../../node_modules/next/dist/compiled/react/index.js");function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Masonry=function(_React$Component){function Masonry(){var _this;return(_this=_React$Component.call(this)||this).state={columns:[],childRefs:[],hasDistributed:!1},_this}!function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(Masonry,_React$Component);var _proto=Masonry.prototype;return _proto.componentDidUpdate=function componentDidUpdate(){this.state.hasDistributed||this.props.sequential||this.distributeChildren()},Masonry.getDerivedStateFromProps=function getDerivedStateFromProps(props,state){var children=props.children,columnsCount=props.columnsCount,hasColumnsChanged=columnsCount!==state.columns.length;return state&&children===state.children&&!hasColumnsChanged?null:_extends({},Masonry.getEqualCountColumns(children,columnsCount),{children,hasDistributed:!1})},_proto.shouldComponentUpdate=function shouldComponentUpdate(nextProps){return nextProps.children!==this.state.children||nextProps.columnsCount!==this.props.columnsCount},_proto.distributeChildren=function distributeChildren(){var _this2=this,_this$props=this.props,children=_this$props.children,columnsCount=_this$props.columnsCount,columnHeights=Array(columnsCount).fill(0);if(this.state.childRefs.every((function(ref){return ref.current.getBoundingClientRect().height}))){var columns=Array.from({length:columnsCount},(function(){return[]})),validIndex=0;react.Children.forEach(children,(function(child){if(child&&react.isValidElement(child)){var childHeight=_this2.state.childRefs[validIndex].current.getBoundingClientRect().height,minHeightColumnIndex=columnHeights.indexOf(Math.min.apply(Math,columnHeights));columnHeights[minHeightColumnIndex]+=childHeight,columns[minHeightColumnIndex].push(child),validIndex++}})),this.setState((function(p){return _extends({},p,{columns,hasDistributed:!0})}))}},Masonry.getEqualCountColumns=function getEqualCountColumns(children,columnsCount){var columns=Array.from({length:columnsCount},(function(){return[]})),validIndex=0,childRefs=[];return react.Children.forEach(children,(function(child){if(child&&react.isValidElement(child)){var ref=react.createRef();childRefs.push(ref),columns[validIndex%columnsCount].push(react.createElement("div",{style:{display:"flex",justifyContent:"stretch"},key:validIndex,ref},child)),validIndex++}})),{columns,childRefs}},_proto.renderColumns=function renderColumns(){var _this$props2=this.props,gutter=_this$props2.gutter,itemTag=_this$props2.itemTag,itemStyle=_this$props2.itemStyle;return this.state.columns.map((function(column,i){return react.createElement(itemTag,{key:i,style:_extends({display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:gutter},itemStyle)},column.map((function(item){return item})))}))},_proto.render=function render(){var _this$props3=this.props,gutter=_this$props3.gutter,className=_this$props3.className,style=_this$props3.style,containerTag=_this$props3.containerTag;return react.createElement(containerTag,{style:_extends({display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:gutter},style),className},this.renderColumns())},Masonry}(react.Component);Masonry.propTypes={},Masonry.defaultProps={columnsCount:3,gutter:"0",className:null,style:{},containerTag:"div",itemTag:"div",itemStyle:{},sequential:!1};const es_Masonry=Masonry;var useIsomorphicLayoutEffect="undefined"!=typeof window?react.useLayoutEffect:react.useEffect,useWindowWidth=function useWindowWidth(){var hasMounted=function useHasMounted(){var _useState=(0,react.useState)(!1),hasMounted=_useState[0],setHasMounted=_useState[1];return useIsomorphicLayoutEffect((function(){setHasMounted(!0)}),[]),hasMounted}(),_useState2=(0,react.useState)("undefined"!=typeof window?window.innerWidth:0),width=_useState2[0],setWidth=_useState2[1],handleResize=(0,react.useCallback)((function(){hasMounted&&setWidth(window.innerWidth)}),[hasMounted]);return useIsomorphicLayoutEffect((function(){if(hasMounted)return window.addEventListener("resize",handleResize),handleResize(),function(){return window.removeEventListener("resize",handleResize)}}),[hasMounted,handleResize]),width},MasonryResponsive=function MasonryResponsive(_ref){var _ref$columnsCountBrea=_ref.columnsCountBreakPoints,columnsCountBreakPoints=void 0===_ref$columnsCountBrea?{350:1,750:2,900:3}:_ref$columnsCountBrea,_ref$gutterBreakPoint=_ref.gutterBreakPoints,gutterBreakPoints=void 0===_ref$gutterBreakPoint?{}:_ref$gutterBreakPoint,children=_ref.children,_ref$className=_ref.className,className=void 0===_ref$className?null:_ref$className,_ref$style=_ref.style,style=void 0===_ref$style?null:_ref$style,windowWidth=useWindowWidth(),getResponsiveValue=(0,react.useCallback)((function(breakPoints,defaultValue){var sortedBreakPoints=Object.keys(breakPoints).sort((function(a,b){return a-b})),value=sortedBreakPoints.length>0?breakPoints[sortedBreakPoints[0]]:defaultValue;return sortedBreakPoints.forEach((function(breakPoint){breakPoint<windowWidth&&(value=breakPoints[breakPoint])})),value}),[windowWidth]),columnsCount=(0,react.useMemo)((function(){return getResponsiveValue(columnsCountBreakPoints,1)}),[getResponsiveValue,columnsCountBreakPoints]),gutter=(0,react.useMemo)((function(){return getResponsiveValue(gutterBreakPoints,"10px")}),[getResponsiveValue,gutterBreakPoints]);return react.createElement("div",{className,style},react.Children.map(children,(function(child,index){return react.cloneElement(child,{key:index,columnsCount,gutter})})))};MasonryResponsive.propTypes={};const es=es_Masonry;var jsx_runtime=__webpack_require__("../../node_modules/next/dist/compiled/react/jsx-runtime.js"),g={firstLineCount:2,secondLineCount:3,otherLinesCount:4},L=({slot:n,aspectRatio:s,config:r})=>{let{firstLineCount:i=g.firstLineCount,secondLineCount:p=g.secondLineCount,otherLinesCount:m=g.otherLinesCount}=r||{},{items:f=[]}=n||{},c=f.reduce(((e,o,t)=>{var _e_,_e_1,_e_2;return t<i?null===(_e_=e[0])||void 0===_e_||_e_.push(o):t<i+p?null===(_e_1=e[1])||void 0===_e_1||_e_1.push(o):null===(_e_2=e[2])||void 0===_e_2||_e_2.push(o),e}),[[],[],[]])||[];return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:null==c?void 0:c.map(((e,o)=>e.length?(0,jsx_runtime.jsx)(es,{columnsCount:o<2||e.length<m?e.length:m,gutter:"4px",children:e.map(((t,u)=>(0,jsx_runtime.jsx)("div",{className:(0,chunk_S7CSCIW4.c)("flex flex-1 items-center justify-center",{[`aspect-${s}`]:!!s}),children:t},`img-${u}`)))},`line-${o}`):null))})},M=({slots:n,aspectRatio:s,items:r,backgroundColor:i,spacing:p,border:m,fluidContent:f,fullHeight:c,config:e,context:o,component:t})=>{var _G,_t_slots_imageGalleryItems_filter,_t_slots_imageGalleryItems,_t_slots;let u=(null==r?void 0:r.length)?{name:"items",items:(null===(_G=(0,chunk_JNIJ5N3Y.a)(r))||void 0===_G?void 0:_G.map(((a,C)=>(0,jsx_runtime.jsx)(chunk_EIQPM3DQ.a,{src:a.url,style:{objectFit:"cover"},alt:`Image ${C}`,fill:!0},(null==a?void 0:a.id)||`image-${C}`))))||[]}:n.imageGalleryItems,P=!(null==r?void 0:r.length)&&!(null==t||null===(_t_slots=t.slots)||void 0===_t_slots||null===(_t_slots_imageGalleryItems=_t_slots.imageGalleryItems)||void 0===_t_slots_imageGalleryItems||null===(_t_slots_imageGalleryItems_filter=_t_slots_imageGalleryItems.filter((({_id:a})=>!(null==a?void 0:a.startsWith("placeholder")))))||void 0===_t_slots_imageGalleryItems_filter?void 0:_t_slots_imageGalleryItems_filter.length);return(0,jsx_runtime.jsx)(chunk_EI3IJHIE.a,{backgroundColor:i,spacing:p,border:m,fluidContent:f,fullHeight:c,children:(0,jsx_runtime.jsx)("div",{className:"flex flex-col gap-1",children:P?(0,jsx_runtime.jsx)(component.D,{context:o,slot:n.imageGalleryItems,data:t}):(0,jsx_runtime.jsx)(L,{slot:u,aspectRatio:s,config:e})})})}}}]);